code du main

refonte complète pour intégrer la nouvelle fonction

